<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 2: Strategic Product Thinking - Spotify's Strategic Journey</title>
    <meta name="description" content="Test your strategic product thinking with Spotify's real business model, competitive strategy, and growth decisions.">
    
    <!-- Open Graph for LinkedIn sharing -->
    <meta property="og:title" content="Week 2: Strategic Product Thinking - Spotify Simulation">
    <meta property="og:description" content="Can you navigate Spotify's strategic evolution? Test your strategic thinking skills.">
    <meta property="og:type" content="website">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* READABILITY OPTIMIZATION */
        .scenario-content {
            font-size: 16px;
            line-height: 1.7;
            max-width: 65ch;
            color: #1f2937;
        }
        
        .scenario-content p {
            margin-bottom: 1.25em;
        }
        
        .scenario-content strong {
            display: block;
            color: #1e40af;
            font-weight: 600;
            font-size: 15px;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        
        /* POST-ANALYSIS SCENARIO FORMATTING */
        .analysis-scenario {
            font-size: 15px;
            line-height: 1.65;
            color: #374151;
            background: #f8fafc;
            padding: 16px;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
            margin-bottom: 16px;
            font-style: italic;
        }
        
        .analysis-scenario .emoji {
            font-size: 18px;
            margin-right: 8px;
            vertical-align: middle;
            font-style: normal;
        }
        
        .analysis-scenario .context-quote {
            font-style: italic;
            color: #4b5563;
            display: block;
            margin-top: 8px;
        }
        
        .feedback-content {
            font-size: 15px;
            line-height: 1.65;
            max-width: 62ch;
            color: #374151;
        }
        
        .feedback-content p {
            margin-bottom: 1.15em;
        }
        
        .feedback-content p:first-child {
            font-weight: 500;
            color: #1f2937;
        }
        
        .question-text {
            font-size: 17px;
            line-height: 1.5;
            font-weight: 600;
            color: #111827;
            max-width: 60ch;
        }
        
        .option-text {
            font-size: 15px;
            line-height: 1.5;
            color: #1f2937;
        }
        
        .section-label {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #6b7280;
            margin-bottom: 0.75em;
        }
        
        /* Professional formal color overrides */
        .bg-indigo-600 { background-color: #1e40af !important; }
        .bg-indigo-100 { background-color: #dbeafe !important; }
        .text-indigo-600 { color: #1e40af !important; }
        .border-indigo-500 { border-color: #2563eb !important; }
        .from-indigo-600 { --tw-gradient-from: #1e40af !important; }
        .to-blue-600 { --tw-gradient-to: #3b82f6 !important; }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createElement: h } = React;

        // Google Apps Script Web App URL for email collection
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwOu2uyUzlVqF6eKJsTL0-k7I0UuK_h3u6ISpj17njIFrZxUfhF4S1DsuQOV7NqAMok/exec';

        // Icon components as simple SVGs
        const Share2Icon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
            h('path', { d: 'M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8' }),
            h('polyline', { points: '16 6 12 2 8 6' }),
            h('line', { x1: 12, y1: 2, x2: 12, y2: 15 })
        );

        const MailIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
            h('path', { d: 'M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z' }),
            h('polyline', { points: '22,6 12,13 2,6' })
        );

        const TrophyIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
            h('path', { d: 'M6 9H4.5a2.5 2.5 0 0 1 0-5H6' }),
            h('path', { d: 'M18 9h1.5a2.5 2.5 0 0 0 0-5H18' }),
            h('path', { d: 'M4 22h16' }),
            h('path', { d: 'M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22' }),
            h('path', { d: 'M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22' }),
            h('path', { d: 'M18 2H6v7a6 6 0 0 0 12 0V2Z' })
        );

        const TrendingUpIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
            h('polyline', { points: '23 6 13.5 15.5 8.5 10.5 1 18' }),
            h('polyline', { points: '17 6 23 6 23 12' })
        );

        const UsersIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
            h('path', { d: 'M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2' }),
            h('circle', { cx: 9, cy: 7, r: 4 }),
            h('path', { d: 'M23 21v-2a4 4 0 0 0-3-3.87' }),
            h('path', { d: 'M16 3.13a4 4 0 0 1 0 7.75' })
        );

        function PMSimulation() {
            const [email, setEmail] = useState('');
            const [hasStarted, setHasStarted] = useState(false);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [answers, setAnswers] = useState([]);
            const [selectedAnswerIndex, setSelectedAnswerIndex] = useState(null);
            const [showResults, setShowResults] = useState(false);
            const [hasAttempted, setHasAttempted] = useState(false);

            // SNIPPET 1: Session Persistence - Restore email on page load
            useEffect(() => {
                // Check for saved email on page load
                const storedEmail = localStorage.getItem('pmSimEmail');
                const storedStartTime = localStorage.getItem('pmSimStartTime');
                
                if (storedEmail) {
                    setEmail(storedEmail);
                    
                    // If they started within last 24 hours, let them continue
                    const hoursSinceStart = (Date.now() - new Date(storedStartTime)) / (1000 * 60 * 60);
                    if (hoursSinceStart < 24) {
                        setHasStarted(true);
                    }
                }
            }, []);

            useEffect(() => {
                // Creator backdoor: Check if URL has ?reset=true parameter
                const urlParams = new URLSearchParams(window.location.search);
                const resetMode = urlParams.get('reset') === 'true';
                
                if (resetMode) {
                    // Creator mode: Clear the attempt flag and allow retaking
                    localStorage.removeItem('product_manager_simulation_week2_attempted');
                    setHasAttempted(false);
                } else {
                    // Normal mode: Check if already attempted
                    const attempted = localStorage.getItem('product_manager_simulation_week2_attempted');
                    if (attempted) {
                        setHasAttempted(true);
                    }
                }
            }, []);

            const simulation = {
                title: "Spotify's Strategic Journey: Strategic Product Thinking",
                company: "Spotify",
                week: "Week 2",
                year: "2026",
                description: "Navigate Spotify's most critical strategic decisions from 2006-2025. Each scenario tests your ability to think strategically about business models, competitive positioning, market entry, and long-term value creation. These are real decisions that shaped a $50B company serving 600M+ users worldwide. Your choices reveal how you balance short-term execution with long-term vision, stakeholder interests with company goals, and growth with sustainability.",
                questions: 
                questions: 
[
                    {
                        id: 1,
                        scenario: "**Stockholm, Sweden - October 2006**\n\n**The Problem:**\nMusic piracy is destroying the industry. Napster, LimeWire, and The Pirate Bay have trained an entire generation to expect free music. iTunes charges $0.99 per song, but most people still pirate. Record labels are hemorrhaging revenue—down 50% from their peak.\n\n**Your Idea:**\nLaunch a legal streaming service with ALL the music, for free (ad-supported) or $10/month (premium). The key insight: piracy exists because it's more convenient than buying. Make legal streaming even more convenient.\n\n**The Obstacles:**\n• Record labels HATE streaming—they see it as cannibalizing iTunes sales\n• They demand 70% of revenue as royalties\n• You'll need licenses from Sony, Universal, Warner, and Merlin (who control 85%+ of music)\n• Building the tech requires millions in funding before earning a single dollar\n\n**The Debate:**\nCo-founder Daniel Ek: \"We need to be better than piracy. That means free access, instant playback, and every song imaginable.\"\nRecord Label Exec: \"Why would anyone buy music if they can stream it for free? You're killing our business.\"",
                        question: "What's your CORE strategic positioning to convince record labels AND attract users?",
                        options: [
                            {
                                text: "Position as 'iTunes killer' - emphasize we'll steal Apple's market share",
                                points: 3,
                                feedback: "This misses the strategic opportunity entirely.\n\nRecord labels don't care about Apple vs. Spotify—they care about total revenue. Positioning as an 'iTunes killer' makes you sound like another tech company trying to extract value from music.\n\nWorse, attacking Apple (who pays labels billions) could alienate a powerful stakeholder. Strategic positioning should create alignment, not conflict."
                            },
                            {
                                text: "Position as 'piracy killer' - legal streaming that's more convenient than stealing",
                                points: 10,
                                feedback: "Perfect. This is Blue Ocean Strategy in action.\n\nBy positioning against piracy (not iTunes), you align with record labels' interests AND tap into 100M+ pirates who might convert. This was Spotify's actual winning strategy: make piracy obsolete through superior UX.\n\nThe genius: you're not competing for the same customers as iTunes—you're converting non-customers (pirates) into paying users, growing the entire music market.\n\nStrategic lesson: The best positioning creates win-win scenarios where your success helps your stakeholders succeed."
                            },
                            {
                                text: "Position as 'Netflix for music' - build brand recognition through analogy",
                                points: 6,
                                feedback: "The analogy helps explain the model but doesn't solve the strategic problem.\n\nNetflix in 2006 was still primarily DVDs by mail—not a strong streaming reference. More importantly, this positioning doesn't address record labels' core objection: will this grow or shrink the music market?\n\nAnalogies are useful for communication, but strategy requires addressing stakeholder concerns directly."
                            },
                            {
                                text: "Position as 'radio 2.0' - emphasize we're like radio (which labels accept) but better",
                                points: 4,
                                feedback: "This is clever framing but fundamentally dishonest.\n\nRadio plays songs randomly with ads; Spotify offers on-demand access. Labels will see through this immediately, and misleading your key partners destroys trust.\n\nStrategic positioning requires authentic differentiation. When you misrepresent your value proposition, you create misaligned expectations that explode later."
                            }
                        ]
                    },
                    {
                        id: 2,
                        scenario: "**2008 - Two Years After Launch**\n\n**The Situation:**\nSpotify has 1M users in Sweden and is preparing to expand across Europe. You've proven the product works—now you need to prove the BUSINESS MODEL works.\n\n**The Data:**\n• Free users cost you $0.006 per stream in royalties\n• Ad revenue generates only $0.001 per stream\n• You're losing $0.005 per stream on free users\n• Premium users ($10/month) are profitable after 300 streams/month\n• Current conversion: only 8% of free users upgrade to Premium\n\n**The Pressure:**\nInvestors: \"You're burning cash on free users. Why not make it paid-only like Netflix?\"\nRecord Labels: \"Free users are destroying our per-song sales. Close the free tier.\"\nYour CFO: \"We need 25% conversion to break even. We're at 8%.\"",
                        question: "What's your strategic move on the freemium model?",
                        options: [
                            {
                                text: "Kill the free tier completely - make Spotify premium-only",
                                points: 2,
                                feedback: "You're abandoning your core strategic advantage.\n\nThe free tier isn't a liability—it's a growth engine. Free users create network effects (playlists, social sharing) and eventual conversions. Killing it eliminates your competitive advantage against Apple Music (which has no free tier).\n\nStrategic thinking requires patience. Don't optimize for short-term unit economics when you're building long-term competitive moats."
                            },
                            {
                                text: "Keep unlimited free tier - optimize for long-term conversion growth",
                                points: 10,
                                feedback: "This is strategic brilliance disguised as patience.\n\nSpotify's actual decision: conversion grew from 8% in 2008 to 46% by 2018—among the highest in the industry. The free tier creates habit formation, social virality, and a massive acquisition funnel.\n\nCompare: Apple Music (30% conversion), Amazon Music (25%), YouTube Music (15%) all envy Spotify's conversion rate.\n\nStrategic lesson: When you have a structural advantage (best freemium conversion engine in the industry), doubling down beats retreating. Your CFO's 25% target was wrong—the real target was proving conversion IMPROVES over time."
                            },
                            {
                                text: "Limit free tier to 10 hours/month to force upgrades",
                                points: 5,
                                feedback: "This is Pandora's failed strategy.\n\nLimited free tiers create bad user experience without meaningfully boosting conversions. Users who hit limits often churn entirely rather than pay.\n\nSpotify's insight: give users an AMAZING free experience, then make Premium so good they can't resist upgrading (offline downloads, no ads, better quality). Artificial scarcity breeds resentment, not revenue."
                            },
                            {
                                text: "Lower Premium price to $5/month to maximize conversions",
                                points: 4,
                                feedback: "Price optimization sounds smart but misses the strategic picture.\n\n$5 vs. $10 might boost conversions 20-30%, but you'd lose 50% revenue per user. Plus, it sets a low price anchor that's hard to raise later.\n\nBetter strategy: keep Premium at $10, improve the value proposition until it's irresistible. This is exactly what Spotify did."
                            }
                        ]
                    },
                    {
                        id: 3,
                        scenario: "**WWDC 2015 - Apple Announces Apple Music**\n\n**The Bombshell:**\nApple just launched Apple Music—a direct Spotify competitor bundled into iOS. They have:\n• 1 Billion iPhone users with one-tap signup\n• $200B+ cash reserves to subsidize growth\n• Native integration into iOS (Siri, lock screen, CarPlay)\n• Same $10/month pricing\n• Same catalog (Sony, Universal, Warner)\n\n**The Stakes:**\nYour board is panicking. One VC: \"Apple killed Spotify in search (Google), browsers (Netscape), and maps (everyone). Music is next.\"\n\n**The Reality:**\n• Spotify has 75M users, 20M paying\n• Apple Music has 0 users but will hit 10M in 6 months\n• Customer Acquisition Cost: Apple $0 (bundled), Spotify $40/user\n• Apple can lose money forever; you need profitability eventually\n\n**Your Advantages:**\n• 2X the users of Apple Music (once they launch)\n• 4X the engagement data (powering better recommendations)\n• Cross-platform (Android, web, smart speakers, cars)\n• Superior algorithms (Discover Weekly, Daily Mix)",
                        question: "What's your strategic response to Apple Music's launch?",
                        options: [
                            {
                                text: "Drop price to $5/month to compete on cost",
                                points: 3,
                                feedback: "Classic mistake: competing on price when you have inferior distribution.\n\nApple can match or beat any price cut AND bundle with iCloud/Apple One. Price wars destroy margins without building defensibility. You'd be playing into their strength, not yours.\n\nStrategic principle: Never compete on a dimension where your competitor has structural advantages."
                            },
                            {
                                text: "Double down on data-driven personalization and algorithmic discovery",
                                points: 10,
                                feedback: "Brilliant. This became Spotify's actual moat.\n\nWith 2X users and 4X engagement, Spotify collects exponentially more data. This powers Discover Weekly, Release Radar, and Daily Mix—features Apple Music still can't match years later.\n\nData advantages COMPOUND over time: more users → better recommendations → more engagement → more data → even better recommendations. This is a true competitive moat, protected by network effects and data scale.\n\nStrategic lesson from Porter's Five Forces: When you can't win on distribution (Apple's strength), compete on a dimension where your structural advantage grows over time."
                            },
                            {
                                text: "Focus on cross-platform and multi-device ecosystem",
                                points: 7,
                                feedback: "Strong strategic thinking—this is a structural advantage Apple CAN'T easily copy.\n\nApple Music is locked to Apple devices; Spotify works everywhere (Android, web, Sonos, Tesla, Alexa, even Apple Watch). This matters.\n\nHowever, cross-platform alone isn't enough to win. It's necessary but not sufficient. You need this PLUS personalization superiority."
                            },
                            {
                                text: "Compete on features - outbuild Apple with superior product velocity",
                                points: 6,
                                feedback: "Better than price competition, but not enough.\n\nYes, Spotify ships faster than Apple. But feature parity is achievable—Apple will eventually close the gap on basic features.\n\nThe strategic question isn't \"can we build faster?\" It's \"what can we build that compounds our advantages over time?\" Data-driven personalization is that answer."
                            }
                        ]
                    },
                    {
                        id: 4,
                        scenario: "**February 2019 - The Podcast Pivot**\n\n**The Context:**\nSpotify has 200M users, 90M Premium subscribers, and is finally approaching profitability. Music streaming is a mature, competitive market with thin margins.\n\n**The Opportunity:**\nPodcasts are exploding. Apple Podcasts dominates with 70% market share, but they're not innovating. Podcasts are:\n• High-engagement content (45min avg. vs. 3min for music)\n• Lower royalty costs (you can own content vs. 70% music royalties)\n• Undermonetized (CPM ads vs. programmatic potential)\n• Fragmented discovery (no Spotify-like recommendation engine)\n\n**The Investment:**\nBuy Gimlet Media (podcast studio) for $200M, Anchor (podcast creation) for $150M, and sign exclusive deals with Joe Rogan ($100M), Michelle Obama, and others.\n\n**The Risks:**\n• $500M+ bet in an unproven business\n• Alienates music artists (\"You pay Joe Rogan more than Taylor Swift?\")\n• 70% of listening is still music—podcasts might distract from core business\n• Exclusives fragment the open podcast ecosystem",
                        question: "Do you invest $500M+ in podcasts?",
                        options: [
                            {
                                text: "No - focus on music, don't distract from core business",
                                points: 2,
                                feedback: "This is strategic myopia.\n\nMusic streaming has 70% margins going to labels—Spotify will NEVER have pricing power there. The core business is a commodity where you compete on features and UX, not economics.\n\nStrategic diversification into podcasts (where you can own content and capture more value) is essential for long-term margin expansion. Staying 'focused' means staying trapped in bad unit economics."
                            },
                            {
                                text: "Yes - invest heavily in exclusive content and discovery tools",
                                points: 10,
                                feedback: "Perfect strategic thinking. This was Spotify's actual bet, and by 2024, podcasts drive 25%+ of listening hours.\n\nHere's the strategic logic: Music is a commodity (same catalog everywhere), so you compete on UX/algorithms—hard to monetize. Podcasts let you own content (lower costs), create exclusives (differentiation), and build new ad businesses (higher margins).\n\nThis is Business Model Canvas thinking: identify where you can capture more value in the value chain. The $100M Joe Rogan deal seemed insane but drove massive user engagement and positioned Spotify as THE podcast platform.\n\nStrategic principle: When your core business has structural margin problems, diversification into adjacent markets with better unit economics isn't distraction—it's survival."
                            },
                            {
                                text: "Yes, but avoid exclusives - keep podcasts open like music",
                                points: 5,
                                feedback: "You're being cautious to a fault.\n\nOpen podcasts don't create competitive differentiation. If every podcast is on every platform, you're back to competing on features and distribution—Apple's game.\n\nExclusives are necessary to create unique value and break out of commodity hell. Yes, they're controversial, but strategic moves often are."
                            },
                            {
                                text: "Yes, but smaller investment - test and learn approach",
                                points: 6,
                                feedback: "Test-and-learn sounds prudent but misses the strategic timing.\n\nPodcasts were at an inflection point in 2019. Incremental investment lets Apple or YouTube move first and lock up the best content/creators.\n\nStrategic windows require bold commitment, not cautious experiments. Spotify's aggressive $500M bet created a winner-take-most dynamic in podcasting."
                            }
                        ]
                    },
                    {
                        id: 5,
                        scenario: "**December 2017 - First Spotify Wrapped Launch**\n\n**The Genesis:**\nYour data science team built \"Year in Music\"—a simple annual summary of users' listening habits. The marketing team wants to rebrand it as \"Spotify Wrapped\" and make it shareable on social media.\n\n**The Prototype:**\nShow users:\n• Top 5 artists, top 5 songs, total minutes listened\n• Fun facts: \"You were in the top 1% of [artist] listeners\"\n• Shareable Instagram story graphics\n\n**The Investment Required:**\n• Engineering: 3 months, 5 developers ($500K)\n• Design: Custom templates, animations ($100K)\n• Infrastructure: Handle 100M+ users generating wraps simultaneously ($200K)\n• Marketing: Promote the feature ($300K)\n• Total: ~$1.1M for a feature users see once a year\n\n**The Skepticism:**\nCFO: \"$1M for an annual gimmick? How does this drive Premium conversions?\"\nProduct Lead: \"We should focus on daily engagement, not yearly moments.\"\nGrowth Team: \"This doesn't directly drive signup or retention metrics.\"\n\n**Early Test Results:**\n• 90%+ of users who view Wrapped share it on social\n• Shared Wrapped drives 3X normal app downloads in December\n• Creates massive brand awareness and cultural moment",
                        question: "How much do you invest in Spotify Wrapped going forward?",
                        options: [
                            {
                                text: "Keep it small - it's a nice-to-have, not a strategic priority",
                                points: 2,
                                feedback: "You're completely missing the strategic value of brand-building and viral marketing.\n\nWrapped isn't just a feature—it's a cultural phenomenon that generates hundreds of millions in earned media value. In a market where customer acquisition costs $40+ per user, Wrapped is essentially free growth at massive scale.\n\nStrategic myopia: optimizing for measurable short-term metrics while ignoring unmeasurable long-term brand value."
                            },
                            {
                                text: "Double down massively - make Wrapped Spotify's signature brand moment",
                                points: 10,
                                feedback: "This is OKR-thinking at its finest.\n\nSpotify invested heavily every year: better personalization, celebrity participation, TikTok integration, billboards based on quirky listening data. By 2023, Wrapped generates 600M+ social shares, becomes the #1 trending topic globally, and drives 30-40% of annual app downloads.\n\nThe goal isn't 'ship Wrapped'—it's 'make Wrapped a cultural phenomenon that reinforces Spotify = personalized music discovery.'\n\nStrategic insight: In consumer businesses, brand moments that users WANT to share are worth far more than traditional marketing spend. Wrapped's ROI is 10X+ any paid acquisition channel."
                            },
                            {
                                text: "Invest moderately - improve it each year but don't overspend",
                                points: 6,
                                feedback: "Conservative but strategically sound. Wrapped does have positive ROI.\n\nHowever, this misses the opportunity to turn a good annual feature into a category-defining cultural moment. When you have lightning in a bottle, you pour gasoline on it, not water.\n\nModerate investment = moderate results."
                            },
                            {
                                text: "Copy it to quarterly - create 'Wrapped' moments 4x per year",
                                points: 4,
                                feedback: "This fundamentally misunderstands what makes Wrapped work: scarcity and anticipation.\n\nAn annual ritual has cultural power; quarterly summaries are just dashboard updates. You'd dilute the magic by making it routine.\n\nStrategic product thinking requires understanding WHEN and WHY features resonate, not just WHAT they do."
                            }
                        ]
                    },
                    {
                        id: 6,
                        scenario: "**2020 - The Profitability Paradox**\n\n**The Success:**\nSpotify is WINNING. You have:\n• 365M users (150M Premium)\n• 31% global market share (vs. Apple 19%, Amazon 13%)\n• Best recommendation algorithms\n• Most engaged user base\n• Cultural dominance (Wrapped, playlists, discovery)\n\n**The Problem:**\nGross margins are stuck at 25%—the lowest of any major tech company:\n• Netflix: 38% | Apple: 42% | Google: 56% | Amazon: 42% | Spotify: 25%\n\n**The Math:**\n• Premium subscriber: $10/month = $120/year revenue\n• Music royalties (70%): $84/year\n• Operating costs: $20/year\n• Gross profit: $16/year per user\n• After marketing, R&D, overhead: $3-5/year profit per user\n\n**The Label Lock-In:**\nRecord labels take 70% of revenue via licensing deals. You have zero negotiating power—if Sony pulls music, you lose millions of users. Music is a commodity (same catalog everywhere), so you can't differentiate on content.",
                        question: "What's your strategy to fix Spotify's margin problem?",
                        options: [
                            {
                                text: "Raise prices to $12-15/month to boost revenue per user",
                                points: 4,
                                feedback: "This addresses symptoms, not the disease.\n\nPrice increases help margins short-term but don't solve the structural problem: you still pay 70% to labels. Plus, Apple and Amazon can bundle music with other services at a loss—you can't compete on price.\n\nChurn risk is real when competitors offer similar catalogs for less. Strategic thinking requires solving root causes, not applying band-aids."
                            },
                            {
                                text: "Aggressively push podcasts to shift listening mix and lower royalty costs",
                                points: 10,
                                feedback: "Exactly Spotify's actual strategy.\n\nBy 2024, 25%+ of listening hours are podcasts (vs. 5% in 2019). Podcast royalties are 20-30% (vs. 70% for music), and Spotify owns much of the content (Gimlet, Joe Rogan, exclusive shows).\n\nThis doesn't solve margins overnight, but it's the ONLY scalable path: Gradually shift mix toward lower-cost, owned content while maintaining music as the core hook.\n\nThis is Business Model Canvas value capture—find where you can control more of the value chain. You can't fix the music margin problem directly (labels won't budge), so you build AROUND it with adjacent content that has better economics."
                            },
                            {
                                text: "Create a record label and sign artists directly to bypass labels",
                                points: 6,
                                feedback: "Bold vertical integration thinking, but timing is wrong.\n\nThis would improve margins on owned content, BUT: Record labels control 85%+ of popular music and would retaliate by pulling catalogs or demanding higher rates. You'd need a decade to build a catalog that retains users.\n\nStrategic lesson: Vertical integration works when you have leverage. Spotify doesn't—yet. This might work in 2030, but it's too early in 2020."
                            },
                            {
                                text: "Bundle audiobooks, live events, and concert tickets into Spotify+ for $15-20/month",
                                points: 7,
                                feedback: "Creative strategic thinking—this addresses the 'value perception' problem and justifies higher prices.\n\nSpotify actually DID launch audiobooks in 2023. However, bundling requires building new businesses (complex, slow) and doesn't fundamentally change the music royalty structure.\n\nIt's a SUPPLEMENT to the podcast strategy, not a replacement. You need both."
                            }
                        ]
                    },
                    {
                        id: 7,
                        scenario: "**2023 - The Generative AI Moment**\n\n**The Landscape:**\nChatGPT launches and changes everything. Every tech company is racing to integrate AI. You have:\n• 600M+ users\n• 15+ years of listening data (billions of hours)\n• Sophisticated recommendation algorithms\n• Personalization as your core moat\n\n**The AI Opportunities:**\n\n**1) AI DJ** - A personalized AI host that introduces songs, explains why you might like them, and curates flow like a real radio DJ\n\n**2) AI Playlist Generation** - \"Create a playlist for a rainy Sunday afternoon coding session\" → instant custom playlist\n\n**3) AI Music Creation** - Partner with tools that let users CREATE music using AI (e.g., \"make me a lo-fi beat for studying\")\n\n**4) AI Voice Translation** - Translate podcasts in real-time (Joe Rogan in Spanish, maintaining his voice)\n\n**The Risks:**\n• AI music creation → artists revolt, labels threaten to pull catalogs\n• AI DJs → feel gimmicky if not executed perfectly\n• Generative AI → expensive to run at scale (GPU costs)\n• Copyright issues → using AI to create music opens legal landmines\n\n**The Competition:**\n• YouTube is building AI music generation into YouTube Music\n• Apple is reportedly training AI models on Apple Music data\n• Startups like Suno and Udio let users generate original songs with AI",
                        question: "Which AI bet do you prioritize for Spotify?",
                        options: [
                            {
                                text: "AI Music Creation - let users generate original songs with AI",
                                points: 3,
                                feedback: "This is strategically dangerous.\n\nMusic creation tools directly threaten record labels (your key partners) and popular artists (your key content). Universal, Sony, and Warner have explicitly pushed back against AI-generated music.\n\nYou'd be risking the 70% of catalog that makes Spotify viable. Strategic thinking requires understanding stakeholder power dynamics—labels have veto power over your business."
                            },
                            {
                                text: "AI DJ - personalized AI host with contextual music curation",
                                points: 10,
                                feedback: "Brilliant strategic choice. Spotify launched AI DJ in 2023 and it's been hugely successful.\n\nHere's why it's genius:\n1) Leverages your unique data moat—only Spotify has your listening history depth\n2) Enhances music discovery (helps labels/artists), doesn't compete with them\n3) Creates emotional connection through personality\n4) Hard to replicate—requires vast data + AI + taste + UX\n\nThis is strategic AI thinking: Apply AI where you have structural advantages (data, taste graphs) and where it aligns with stakeholder interests. The AI DJ makes users listen MORE music and discover MORE artists—labels love this."
                            },
                            {
                                text: "AI Playlist Generation - natural language playlist creation",
                                points: 7,
                                feedback: "Solid, low-risk AI application.\n\n'Create a playlist for dinner party with 90s throwbacks' → instant value. This enhances discovery without threatening labels.\n\nHowever, it's not a huge moat—competitors can copy this relatively easily. It's a table-stakes feature, not a strategic differentiator. Good to have, but not enough to win on AI."
                            },
                            {
                                text: "AI Voice Translation for podcasts - real-time multilingual content",
                                points: 8,
                                feedback: "Innovative and strategically smart!\n\nVoice translation breaks down language barriers for podcasts—huge for global expansion. Spotify actually piloted this with AI-translated Joe Rogan episodes in Spanish, French, and German.\n\nThis plays to Spotify's podcast strength and opens new markets. The strategic logic is sound: Use AI to unlock value in content you already own/control.\n\nScores slightly below AI DJ only because it's narrower in scope (podcasts only, not music)."
                            }
                        ]
                    },
                    {
                        id: 8,
                        scenario: "**2010 - Spotify Has Conquered Sweden**\n\n**The Success:**\nIn Sweden, Spotify is ubiquitous: 25% market penetration, 60% Premium conversion, music piracy down 80%.\n\n**The Expansion Decision:**\nYou need to go global, but which markets first?\n\n**Option A: United States**\n• Biggest music market globally ($7B+ annual)\n• But: iTunes dominance, radio culture, Pandora competition\n• Labels will demand higher royalties for US rights\n• High customer acquisition costs ($50-80 per user)\n\n**Option B: Western Europe (UK, Germany, France)**\n• Culturally similar to Sweden\n• Strong tech adoption, existing streaming familiarity\n• Labels easier to negotiate with, lower CAC ($20-30 per user)\n\n**Option C: Emerging Markets (India, Brazil, Indonesia)**\n• Massive populations (India: 1.4B people)\n• Rampant music piracy (India: 90%+ piracy rate)\n• Low willingness to pay ($2-3/month max)\n• But: Huge long-term potential\n\n**Option D: East Asia (Japan, South Korea, China)**\n• Strong music culture, high smartphone penetration\n• But: Local competitors entrenched (QQ Music in China has 800M users)\n• Government regulations (China requires local partnerships)",
                        question: "Which market do you expand to first?",
                        options: [
                            {
                                text: "United States - go big or go home, tackle the largest market",
                                points: 8,
                                feedback: "Bold and ultimately RIGHT (Spotify did launch in US in 2011).\n\nThe US is strategically critical: It's the biggest music market, sets global trends, and unlocking US licenses makes every other market easier.\n\nHOWEVER, this was Spotify's riskiest move—Pandora and iTunes were entrenched, labels demanded brutal terms (higher royalties), and American radio culture made streaming adoption slower. Spotify barely survived US launch costs.\n\nStrategic wisdom: Sometimes you need to fight the hardest battle first because winning it unlocks everything else. But sequencing matters too."
                            },
                            {
                                text: "Western Europe - expand to culturally similar markets with easier negotiation",
                                points: 10,
                                feedback: "STRATEGICALLY PERFECT. This was Spotify's actual sequencing: UK/Germany/France first (2009-2010), THEN US (2011).\n\nHere's why this was genius:\n1) Build scale and negotiating leverage before tackling the US\n2) Prove the model works across multiple markets\n3) Generate revenue to fund expensive US launch\n4) Learn cross-border expansion playbooks in friendlier markets\n\nWestern Europe gave Spotify 15M users BEFORE the US battle—that scale was crucial for surviving US competition. Strategic sequencing matters as much as strategy itself.\n\nLesson: Build strength before fighting your hardest battle."
                            },
                            {
                                text: "Emerging markets - capture the next billion users in India, Brazil, Indonesia",
                                points: 4,
                                feedback: "Too early. Emerging markets have massive potential but brutal economics in 2010.\n\n$2-3/month pricing doesn't cover royalties, payment infrastructure is weak, and you'd burn through capital without proving the core model in profitable markets.\n\nStrategic timing matters—Spotify entered India in 2019 AFTER dominating Western markets and could afford to operate at a loss for market share. Don't fight unproven battles simultaneously."
                            },
                            {
                                text: "East Asia - Japan, South Korea for high-value users",
                                points: 5,
                                feedback: "Japan/South Korea are interesting: high smartphone penetration, strong music culture, willingness to pay.\n\nBUT: Local competitors (Line Music in Japan, Melon in Korea) had massive head starts. China is even harder—government regulations require local partnerships, and QQ Music/NetEase Cloud Music are unbeatable.\n\nStrategic lesson: Don't enter markets where local players have insurmountable advantages unless you have a unique wedge. Spotify has no special advantage in East Asia."
                            }
                        ]
                    },
                    {
                        id: 9,
                        scenario: "**July 2020 - Spotify Pays $0.003-0.005 Per Stream**\n\n**The Controversy:**\nTaylor Swift pulled her entire catalog from Spotify in 2014, saying \"Music is art, art is valuable, and valuable things should be paid for.\"\n\nOther artists pile on:\n• Thom Yorke (Radiohead): \"Spotify is the last desperate fart of a dying corpse\"\n• Independent artists: \"I earned $38 after 1 million streams\"\n• Songwriter unions demand higher royalties\n\n**The Math:**\n• Average stream: $0.004 payout to rights holders\n• Split: 70% to label, 15-20% to artist, 10-15% to songwriters\n• 1,000 streams = $4 (if you own 100% of rights)\n• 1,000,000 streams = $4,000\n\n**The Artist Perspective:**\n\"Spotify pays NOTHING. I'm better off touring or selling vinyl. Streaming cannibalizes album sales without fair compensation.\"\n\n**The Spotify Perspective:**\n• We've paid $10B+ to rights holders since launch\n• We're converting pirates to paying listeners—increasing total music revenue\n• 90%+ of our revenue goes to rights holders\n• Free tier exposes artists to millions of potential fans",
                        question: "How do you handle the artist backlash?",
                        options: [
                            {
                                text: "Raise per-stream payouts to $0.01 (triple current rate)",
                                points: 2,
                                feedback: "Economically catastrophic.\n\nTripling payouts would turn Spotify's tiny profits into massive losses. You'd burn billions and still not satisfy artists (even $0.01 per stream = only $10K for 1M streams).\n\nPlus, record labels would capture most of the increase—artists see only 15-20% of streaming revenue. You can't solve this with money alone because you don't control the payout split; labels do."
                            },
                            {
                                text: "Defend current model + invest in artist discovery tools (free)",
                                points: 10,
                                feedback: "EXACTLY Spotify's strategy, and it worked.\n\nHere's the logic:\n1) The real value Spotify provides isn't PAYMENT PER STREAM—it's DISCOVERY and REACH. An artist getting 1M streams on Spotify reaches 100K+ listeners who might buy merch, attend concerts, become superfans.\n2) Spotify built tools: Spotify for Artists dashboard (free analytics), Marquee (paid promotion), Canvas (visual loops), and Discovery Mode (artists opt into lower payouts for higher playlist placement).\n3) Strategic communication: Spotify published data showing how streaming GREW the overall music pie—global music revenue up 40% since Spotify's launch after declining for a decade.\n\nThe strategic insight: You can't win the '$/per stream' battle—labels control that split. Instead, shift the conversation to VALUE CREATION: Spotify helps artists build careers through discovery. This is stakeholder management—address the concern (artists feel undervalued) without making economically impossible promises."
                            },
                            {
                                text: "Create 'artist tip jar' for direct fan-to-artist payments",
                                points: 7,
                                feedback: "Smart! This addresses the real problem: artists want CONNECTION with fans and DIRECT monetization.\n\nTip jars (which Spotify tested) let superfans support artists without Spotify changing its economics. However, this doesn't fix the core issue—most artists don't have superfans yet.\n\nIt's a good supplement to the discovery strategy, but not a complete solution."
                            },
                            {
                                text: "Launch 'Spotify for Artists Plus' - $50/month for better tools and promotion",
                                points: 3,
                                feedback: "This CHARGES struggling artists instead of paying them more. Optics disaster.\n\nWhile artist tools have value, making artists pay Spotify (on top of low streaming payouts) would create a PR nightmare. 'Spotify charges artists to be discovered on Spotify' is a brutal headline.\n\nStrategic communication matters as much as product features."
                            }
                        ]
                    },
                    {
                        id: 10,
                        scenario: "**2025 - Spotify at a Strategic Crossroads**\n\n**What You've Achieved:**\n• 600M+ users, 250M Premium subscribers\n• 31% global market share\n• $13B annual revenue\n• Finally profitable (barely)\n• Cultural dominance: Wrapped, playlists, AI DJ\n\n**The Plateau:**\nUser growth is slowing. Premium conversion has peaked at ~42%. Music streaming is mature—most people who'll pay for streaming already do.\n\n**Strategic Options for 2025-2030:**\n\n**A) Vertical Integration into Live Music/Events** - Buy venues, ticketing, use listening data to predict concert demand\n\n**B) Social Features - \"TikTok for Music Discovery\"** - Let users create/share short music videos, react to songs\n\n**C) Creator Economy Platform** - Let artists upload direct to Spotify (bypass labels), take 30% revenue share\n\n**D) AI-Generated Personalized Content** - Create AI-generated background music, soundscapes, meditation tracks\n\n**E) Super-App Expansion - Spotify as Audio Everything** - Audiobooks (launched 2023), add live sports audio, language learning, meditation",
                        question: "What's Spotify's strategic direction for the next 5 years?",
                        options: [
                            {
                                text: "Vertical integration into live music and events",
                                points: 7,
                                feedback: "Interesting strategic thinking.\n\nLive music is high-margin (~40%) vs. streaming (25%). Your data could predict which artists to book, optimize ticket pricing, reduce no-shows.\n\nHowever, live events are operationally complex, capital-intensive (venues, staff, logistics), and low-margin compared to software. This is Amazon's playbook (high-margin AWS subsidizes low-margin retail)—but does Spotify have the capital and operational expertise?\n\nRisky but potentially transformative if executed well."
                            },
                            {
                                text: "Super-app expansion - become 'the app for everything you listen to'",
                                points: 10,
                                feedback: "PERFECT strategic vision. This is Spotify's actual 2025 direction.\n\nAudiobooks (launched 2023), enhanced podcast features, potential sports audio, language learning, meditation. Here's the strategic logic:\n1) Increases value proposition—justify $15-20/month instead of $10\n2) Leverages existing user base and infrastructure\n3) Adds content with better margins than music\n4) Doesn't alienate labels—you're ADDING content, not replacing music\n\nStrategic thinking: When you dominate one category (music streaming), expand to adjacent categories that leverage your core strength (audio delivery, personalization algorithms, user trust).\n\nThis is Jeff Bezos' philosophy: Earn trust in one category (books), expand to everything else (Amazon). Spotify is becoming the 'everything audio' company."
                            },
                            {
                                text: "Creator economy platform - bypass labels, let artists upload direct",
                                points: 6,
                                feedback: "Bold disintermediation strategy!\n\nIf you became the YouTube of music (artists upload direct, you take 30%, they keep 70%), you'd fix the margin problem AND empower independent artists.\n\nHowever, record labels would retaliate by pulling catalogs—you'd lose Taylor Swift, Drake, Beyoncé. Strategic lesson: Disintermediation is powerful but requires timing. Spotify isn't strong enough YET to survive without major labels.\n\nThis might work in 2030, but too early in 2025."
                            },
                            {
                                text: "Social features - make Spotify the TikTok of music discovery",
                                points: 5,
                                feedback: "This addresses a real problem: music discovery is increasingly social (TikTok drives hits).\n\nBUT: Social features have MASSIVE network effects—you need critical mass fast, or nobody uses them. Spotify tried social features before (collaborative playlists, friend activity)—limited success.\n\nThe strategic challenge: Why would users come to Spotify for social when they already have TikTok, Instagram, and Snapchat? You're playing catch-up in someone else's game."
                            }
                        ]
                    }
                ]                ]
            };

            // SNIPPET 5: Enhanced tracking with retry logic
            const retryFailedEvents = async () => {
                const failed = JSON.parse(localStorage.getItem('pmSimFailedEvents') || '[]');
                
                if (failed.length === 0) return;
                
                console.log(`🔄 Retrying ${failed.length} failed events...`);
                
                const stillFailed = [];
                
                for (const event of failed) {
                    // Don't retry more than 3 times
                    if (event.retryCount >= 3) {
                        console.warn('⚠️ Giving up on event after 3 retries:', event);
                        continue;
                    }
                    
                    try {
                        await fetch(GOOGLE_SCRIPT_URL, {
                            method: 'POST',
                            mode: 'no-cors',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(event)
                        });
                        
                        console.log('✅ Retry successful:', event.status || event.action);
                        
                    } catch (error) {
                        // Still failing, keep for next retry
                        event.retryCount = (event.retryCount || 0) + 1;
                        stillFailed.push(event);
                    }
                }
                
                // Update failed events list
                if (stillFailed.length > 0) {
                    localStorage.setItem('pmSimFailedEvents', JSON.stringify(stillFailed));
                } else {
                    localStorage.removeItem('pmSimFailedEvents');
                    console.log('✅ All failed events recovered!');
                }
            };

            const sendToGoogleSheets = async (data) => {
                try {
                    await fetch(GOOGLE_SCRIPT_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data)
                    });
                    
                    // On success, retry any failed events
                    await retryFailedEvents();
                    
                    console.log('✅ Tracked:', data.status || data.action);
                    
                } catch (error) {
                    // Store failed event for later retry
                    const failedEvents = JSON.parse(localStorage.getItem('pmSimFailedEvents') || '[]');
                    failedEvents.push({ 
                        ...data, 
                        failedAt: new Date().toISOString(),
                        retryCount: (data.retryCount || 0)
                    });
                    localStorage.setItem('pmSimFailedEvents', JSON.stringify(failedEvents));
                    
                    console.error('❌ Tracking failed (saved for retry):', error);
                }
            };

            const handleEmailSubmit = (e) => {
                e.preventDefault();
                if (email && email.includes('@')) {
                    // SNIPPET 1: Save to localStorage for session persistence
                    localStorage.setItem('pmSimEmail', email);
                    localStorage.setItem('pmSimStartTime', new Date().toISOString());
                    
                    sendToGoogleSheets({ email, simulation: 'Week 1 - Product Manager Fundamentals', status: 'started' });
                    setHasStarted(true);
                }
            };

            const handleAnswer = (optionIndex) => {
                console.log('Answer clicked:', optionIndex); // Debug
                setSelectedAnswerIndex(optionIndex);
            };

            // SNIPPET 1: Clear stored data on completion
            const clearStoredProgress = () => {
                localStorage.removeItem('pmSimEmail');
                localStorage.removeItem('pmSimStartTime');
            };

            const handleNextChallenge = () => {
                if (selectedAnswerIndex === null) return;
                
                const currentQ = simulation.questions[currentQuestion];
                const selectedOption = currentQ.options[selectedAnswerIndex];
                
                const newAnswers = [...answers, { question: currentQuestion, points: selectedOption.points, feedback: selectedOption.feedback }];
                setAnswers(newAnswers);
                setSelectedAnswerIndex(null); // Reset selection for next question

                // SNIPPET 2: Track progress every 3 questions
                if ((currentQuestion + 1) % 3 === 0 && currentQuestion < simulation.questions.length - 1) {
                    sendToGoogleSheets({
                        email,
                        simulation: 'Week 1 - Product Manager Fundamentals',
                        status: 'progress',
                        questionNumber: currentQuestion + 1,
                        totalQuestions: simulation.questions.length
                    });
                }

                if (currentQuestion < simulation.questions.length - 1) {
                    setCurrentQuestion(currentQuestion + 1);
                } else {
                    const totalPoints = newAnswers.reduce((sum, answer) => sum + answer.points, 0);
                    const maxPoints = simulation.questions.reduce((sum, q) => sum + Math.max(...q.options.map(o => o.points)), 0);
                    const percentage = Math.round((totalPoints / maxPoints) * 100);
                    
                    let tier = '';
                    if (percentage >= 90) tier = 'Strategic Mastery';
                    else if (percentage >= 75) tier = 'Applied Proficiency';
                    else if (percentage >= 60) tier = 'Core Competency';
                    else tier = 'Foundational Understanding';
                    
                    sendToGoogleSheets({ 
                        email, 
                        simulation: 'Week 1 - Product Manager Fundamentals',
                        score: totalPoints,
                        percentage,
                        tier
                    });
                    
                    setShowResults(true);
                    localStorage.setItem('product_manager_simulation_week2_attempted', 'true');
                    clearStoredProgress(); // SNIPPET 1: Clear after completion
                }
            };

            const calculateScore = () => {
                const totalPoints = answers.reduce((sum, answer) => sum + answer.points, 0);
                const maxPoints = simulation.questions.reduce((sum, q) => sum + Math.max(...q.options.map(o => o.points)), 0);
                return { totalPoints, maxPoints, percentage: Math.round((totalPoints / maxPoints) * 100) };
            };

            const getNarrative = (percentage) => {
                if (percentage >= 90) {
                    return {
                        title: "Strategic Mastery",
                        text: "Outstanding! You demonstrated exceptional understanding of Product Manager fundamentals. Your answers show you grasp the strategic nature of product management - balancing user needs, business goals, and team dynamics. You understand that Product Managers are decision-makers who use frameworks, data, and judgment to drive outcomes. You're thinking like a seasoned Product Manager who knows when to lead, when to listen, and when to dig deeper. This level of product intuition typically takes years to develop.",
                        tier: "Strategic Mastery"
                    };
                } else if (percentage >= 75) {
                    return {
                        title: "Applied Proficiency",
                        text: "Strong performance! You showed solid grasp of Product Manager core competencies. You understand the Product Manager role is about making tough trade-off decisions with incomplete information. Your answers reflect good judgment on prioritization, stakeholder management, and user-centric thinking. A few decisions leaned too heavily on one dimension (execution vs strategy, or data vs intuition). The best Product Managers balance all aspects. Keep practicing framework-driven decision making and study real Product Manager case studies to sharpen your instincts.",
                        tier: "Applied Proficiency"
                    };
                } else if (percentage >= 60) {
                    return {
                        title: "Core Competency",
                        text: "You're building a solid foundation in product management. You understand some key concepts - Product Managers make decisions, use data, balance stakeholders - but missed opportunities to apply structured thinking. Several answers confused Product Manager with Project Manager or Product Owner roles, or showed tactical thinking where strategic thinking was needed. Focus on learning frameworks like RICE prioritization, Jobs-to-be-Done, and the distinction between outputs (features) and outcomes (user value). Read 'Inspired' by Marty Cagan and study how top Product Managers think.",
                        tier: "Core Competency"
                    };
                } else {
                    return {
                        title: "Foundational Understanding",
                        text: "You're at the beginning of your Product Manager journey. Several answers suggest you're still learning what product management fundamentally is - it's not project management, not product ownership, and not just shipping features. Product Managers are strategic decision-makers who discover what users need, prioritize ruthlessly, and drive business outcomes. Start with fundamentals: Read 'Inspired' by Marty Cagan, study the product lifecycle, and learn prioritization frameworks. Watch Product Manager interviews and case study breakdowns. The good news: These are all learnable skills. Keep studying and practicing!",
                        tier: "Foundational Understanding"
                    };
                }
            };

            // READABILITY: Helper function to format text with paragraphs
            const formatText = (text) => {
                if (!text) return '';
                const paragraphs = text.split('\n\n').filter(p => p.trim());
                return paragraphs.map((para, index) => {
                    const trimmed = para.trim();
                    
                    // Check if the entire paragraph is a **bold header**
                    const headerMatch = trimmed.match(/^\*\*(.+)\*\*$/);
                    if (headerMatch) {
                        return h('p', { 
                            key: index,
                            className: 'mb-2 mt-4 first:mt-0',
                            style: { fontWeight: 700, color: '#1e40af', fontSize: '16px' }
                        }, headerMatch[1]);
                    }
                    
                    // Check for emoji-prefixed scenario lines (common in scenarios)
                    const emojiMatch = trimmed.match(/^([🎯🏠📊🔥⚡⚠️🎊💡🚀]+)\s(.+)$/);
                    if (emojiMatch) {
                        return h('p', { 
                            key: index,
                            className: 'mb-3 flex items-start gap-2'
                        },
                            h('span', { className: 'emoji text-xl flex-shrink-0' }, emojiMatch[1]),
                            h('span', { className: 'context-text flex-1' }, emojiMatch[2])
                        );
                    }
                    
                    // Check for lines like "**Label:**\nBody text"
                    const labelMatch = trimmed.match(/^\*\*(.+?)\*\*\n(.+)$/s);
                    if (labelMatch) {
                        return h('p', { 
                            key: index,
                            className: 'mb-3 last:mb-0'
                        },
                            h('strong', { style: { fontWeight: 600, color: '#1e40af', fontSize: '15px', display: 'block', marginBottom: '4px' } }, labelMatch[1] + ':'),
                            h('span', { style: { color: '#4b5563' } }, labelMatch[2])
                        );
                    }
                    
                    // Check for quoted dialogue (common in scenarios)
                    const quoteMatch = trimmed.match(/^"(.+)"$/);
                    if (quoteMatch) {
                        return h('p', { 
                            key: index,
                            className: 'mb-3 italic pl-4 border-l-2 border-blue-300',
                            style: { color: '#475569', fontStyle: 'italic', fontSize: '15px' }
                        }, `"${quoteMatch[1]}"`);
                    }
                    
                    // Plain paragraph
                    return h('p', { 
                        key: index,
                        className: 'mb-3 last:mb-0',
                        style: { lineHeight: '1.6' }
                    }, trimmed);
                });
            };

            const shareToLinkedIn = () => {
                const score = calculateScore();
                const narrative = getNarrative(score.percentage);
                
                // Track share event in Google Sheets
                sendToGoogleSheets({ 
                    email, 
                    simulation: 'Week 1 - Product Manager Fundamentals',
                    score: score.totalPoints,
                    percentage: score.percentage,
                    tier: narrative.tier,
                    action: 'SHARED_ON_LINKEDIN'
                });
                
                // Create shareable text with simulation URL
                const simulationUrl = window.location.href.split('?')[0];
                
                const shareText = `I completed Product Manager Simulation 1/20 today.

My assessment: ${score.percentage}% - ${narrative.tier}

The scenario: "${simulation.title}"

Key areas evaluated:
• Product Manager vs Project Manager role clarity
• Stakeholder management under pressure
• Data-driven decision making
• Strategic business model decisions
• Competitive positioning and moats
• Market entry sequencing
• Stakeholder management
• Long-term value creation

Working through Spotify's strategic journey from 2006-2025 revealed how strategic product thinking balances short-term execution with long-term vision, growth with sustainability, and stakeholder interests with company goals.

Simulation link: ${simulationUrl}

#ProductManagement #ProductStrategy #StrategicThinking #BusinessStrategy #ProfessionalDevelopment #Leadership #ContinuousLearning

Connect with Mohan Simham for the complete Product Manager simulation series: linkedin.com/in/mohansimham`;

                // Show modal with instructions
                const modal = document.createElement('div');
                modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 9999; padding: 20px;';
                
                const card = document.createElement('div');
                card.style.cssText = 'background: white; border-radius: 16px; padding: 32px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto;';
                
                const previewText = shareText.replace(/</g, '&lt;').replace(/>/g, '&gt;');
                
                card.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 16px;">🎉</div>
                        <h2 style="font-size: 24px; font-weight: bold; margin-bottom: 16px; color: #1f2937;">Ready to Share Your Achievement!</h2>
                        <p style="color: #6b7280; margin-bottom: 24px; line-height: 1.6;">Share your Product Manager assessment results on LinkedIn in 3 easy steps:</p>
                        <ol style="text-align: left; color: #6b7280; margin-bottom: 24px; line-height: 1.8; padding-left: 24px;">
                            <li><strong>Click</strong> the button below (copies text + opens LinkedIn)</li>
                            <li><strong>Click "Start a post"</strong> on LinkedIn</li>
                            <li><strong>Paste</strong> (Ctrl+V or Cmd+V) and click Post! 🚀</li>
                        </ol>
                        <div style="background: #f3f4f6; padding: 16px; border-radius: 8px; margin-bottom: 24px; text-align: left; max-height: 250px; overflow-y: auto; font-size: 13px; line-height: 1.6; white-space: pre-wrap; color: #374151; font-family: monospace;">${previewText}</div>
                        <button id="copyShareBtn" style="width: 100%; background: #0A66C2; color: white; padding: 16px; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; margin-bottom: 12px; transition: all 0.3s;">
                            📋 Copy & Open LinkedIn
                        </button>
                        <button id="cancelBtn" style="width: 100%; background: #e5e7eb; color: #374151; padding: 12px; border: none; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer;">
                            Cancel
                        </button>
                    </div>
                `;
                
                modal.appendChild(card);
                document.body.appendChild(modal);
                
                // Add event listeners
                const copyBtn = document.getElementById('copyShareBtn');
                const cancelBtn = document.getElementById('cancelBtn');
                
                copyBtn.addEventListener('click', () => {
                    navigator.clipboard.writeText(shareText).then(() => {
                        window.open('https://www.linkedin.com/feed/', '_blank');
                        copyBtn.innerHTML = '✅ Copied! LinkedIn Opening...';
                        copyBtn.style.background = '#10b981';
                        setTimeout(() => {
                            if (modal.parentElement) {
                                document.body.removeChild(modal);
                            }
                        }, 2000);
                    }).catch(() => {
                        alert('Please copy manually:\n\n' + shareText);
                        window.open('https://www.linkedin.com/feed/', '_blank');
                    });
                });
                
                cancelBtn.addEventListener('click', () => {
                    if (modal.parentElement) {
                        document.body.removeChild(modal);
                    }
                });
                
                // Close on background click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        document.body.removeChild(modal);
                    }
                });
            };

            const downloadBadge = () => {
                const score = calculateScore();
                const narrative = getNarrative(score.percentage);
                
                // Track badge download event in Google Sheets
                sendToGoogleSheets({ 
                    email, 
                    simulation: 'Week 1 - Product Manager Fundamentals',
                    score: score.totalPoints,
                    percentage: score.percentage,
                    tier: narrative.tier,
                    action: 'DOWNLOADED_BADGE'
                });
                
                // Create professional achievement badge
                const canvas = document.createElement('canvas');
                canvas.width = 1200;
                canvas.height = 675;
                const ctx = canvas.getContext('2d');
                
                // Background - Clean white with professional gradient accent
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Left accent bar - Navy blue gradient
                const leftGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                leftGradient.addColorStop(0, '#1e40af');
                leftGradient.addColorStop(1, '#3b82f6');
                ctx.fillStyle = leftGradient;
                ctx.fillRect(0, 0, 20, canvas.height);
                
                // Top header section - Light blue background
                ctx.fillStyle = '#eff6ff';
                ctx.fillRect(20, 0, canvas.width - 20, 120);
                
                // Logo/Brand area top left
                ctx.fillStyle = '#1e40af';
                ctx.font = 'bold 24px Arial, sans-serif';
                ctx.textAlign = 'left';
                ctx.fillText('PRODUCT MANAGEMENT', 60, 50);
                ctx.fillStyle = '#3b82f6';
                ctx.font = '18px Arial, sans-serif';
                ctx.fillText('Professional Assessment Certificate', 60, 80);
                
                // Badge indicator top right
                ctx.fillStyle = '#1e40af';
                ctx.fillRect(950, 30, 200, 50);
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 16px Arial, sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('SIMULATION 1/20', 1050, 60);
                
                // Main content area
                ctx.textAlign = 'center';
                
                // Achievement title
                ctx.fillStyle = '#1f2937';
                ctx.font = 'bold 48px Arial, sans-serif';
                ctx.fillText('ACHIEVEMENT CERTIFICATE', 600, 200);
                
                // Divider line
                ctx.strokeStyle = '#e5e7eb';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(300, 230);
                ctx.lineTo(900, 230);
                ctx.stroke();
                
                // Score section - Large and prominent
                ctx.fillStyle = '#1e40af';
                ctx.font = 'bold 96px Arial, sans-serif';
                ctx.fillText(score.percentage + '%', 600, 340);
                
                // Tier badge
                const tierWidth = ctx.measureText(narrative.tier.toUpperCase()).width + 60;
                ctx.fillStyle = '#dbeafe';
                ctx.fillRect((canvas.width - tierWidth) / 2, 360, tierWidth, 50);
                ctx.fillStyle = '#1e40af';
                ctx.font = 'bold 28px Arial, sans-serif';
                ctx.fillText(narrative.tier.toUpperCase(), 600, 395);
                
                // Challenge name
                ctx.fillStyle = '#6b7280';
                ctx.font = '24px Arial, sans-serif';
                ctx.fillText('Airbnb Platform Evolution', 600, 450);
                ctx.font = '20px Arial, sans-serif';
                ctx.fillText('Product Manager Fundamentals • Strategic Decision Making', 600, 480);
                
                // Bottom section - Curator and branding
                ctx.fillStyle = '#f9fafb';
                ctx.fillRect(20, 530, canvas.width - 20, 145);
                
                // Divider
                ctx.strokeStyle = '#e5e7eb';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(60, 530);
                ctx.lineTo(1140, 530);
                ctx.stroke();
                
                // Certificate text
                ctx.fillStyle = '#9ca3af';
                ctx.font = 'italic 18px Arial, sans-serif';
                ctx.fillText('This certificate validates completion of a comprehensive product management', 600, 570);
                ctx.fillText('assessment testing strategic thinking, prioritization, and decision-making skills.', 600, 595);
                
                // Curator info
                ctx.fillStyle = '#1f2937';
                ctx.font = 'bold 22px Arial, sans-serif';
                ctx.fillText('Curated by Mohan Simham', 600, 635);
                
                ctx.fillStyle = '#2563eb';
                ctx.font = 'bold 20px Arial, sans-serif';
                ctx.fillText('linkedin.com/in/mohansimham', 600, 660);
                
                // Decorative corner elements
                ctx.strokeStyle = '#3b82f6';
                ctx.lineWidth = 3;
                
                // Top right corner
                ctx.beginPath();
                ctx.moveTo(1140, 140);
                ctx.lineTo(1180, 140);
                ctx.lineTo(1180, 180);
                ctx.stroke();
                
                // Bottom left corner
                ctx.beginPath();
                ctx.moveTo(60, 510);
                ctx.lineTo(20, 510);
                ctx.lineTo(20, 550);
                ctx.stroke();
                
                // Download
                canvas.toBlob((blob) => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    const timestamp = new Date().toISOString().split('T')[0];
                    a.download = `Product-Manager-Simulation-Certificate-${score.percentage}pct-${timestamp}.png`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    // Show success message
                    const successMsg = document.createElement('div');
                    successMsg.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #10b981; color: white; padding: 16px 24px; border-radius: 8px; font-weight: 600; z-index: 10000; box-shadow: 0 4px 6px rgba(0,0,0,0.1); animation: slideIn 0.3s ease;';
                    successMsg.innerHTML = '✅ Certificate downloaded!<br><span style="font-size: 14px; font-weight: normal;">Ready to share on LinkedIn</span>';
                    document.body.appendChild(successMsg);
                    
                    setTimeout(() => {
                        successMsg.style.animation = 'slideOut 0.3s ease';
                        setTimeout(() => {
                            if (successMsg.parentElement) {
                                document.body.removeChild(successMsg);
                            }
                        }, 300);
                    }, 3000);
                });
            };

            if (hasAttempted && !hasStarted) {
                return h('div', { className: 'min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-6' },
                    h('div', { className: 'max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center' },
                        h('div', { className: 'w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4' },
                            h(TrophyIcon)
                        ),
                        h('h2', { className: 'text-2xl font-bold text-gray-900 mb-4' }, 'Already Completed!'),
                        h('p', { className: 'text-gray-600 mb-6' }, "You've already taken this simulation. Each learner gets one attempt to ensure thoughtful decision-making and fair competition."),
                        h('p', { className: 'text-sm text-gray-500' }, 'Want more Product Manager simulations? Follow the challenge series for upcoming modules!')
                    )
                );
            }

            if (!hasStarted) {
                return h('div', { className: 'min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-6' },
                    h('div', { className: 'max-w-2xl w-full bg-white rounded-2xl shadow-xl overflow-hidden' },
                        h('div', { className: 'bg-gradient-to-r from-blue-600 to-blue-700 p-8 text-white' },
                            h('p', { className: 'text-sm font-semibold text-blue-100 mb-3 tracking-wide uppercase' }, '✨ Master Real Product Manager Challenges'),
                            h('p', { className: 'text-xs text-blue-100 mb-4' }, 'Navigate actual business scenarios from high-growth companies'),
                            h('div', { className: 'flex items-center gap-3 mb-4' },
                                h('div', { className: 'w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center' },
                                    h(TrendingUpIcon)
                                ),
                                h('div', null,
                                    h('div', { className: 'text-sm text-blue-100 mb-1' }, 'Simulation 1/20 • ' + simulation.year),
                                    h('h1', { className: 'text-2xl font-bold' }, simulation.title),
                                    h('p', { className: 'text-blue-100' }, simulation.company + ' Case Study')
                                )
                            )
                        ),
                        h('div', { className: 'p-8' },
                            h('p', { className: 'text-lg text-gray-700 mb-6' }, simulation.description),
                            
                            h('div', { className: 'bg-amber-50 border-l-4 border-amber-500 p-4 mb-6' },
                                h('p', { className: 'text-sm text-amber-800' },
                                    h('strong', null, '⚡ Skills Tested: '),
                                    'Product Manager vs Project Manager clarity, stakeholder management, prioritization frameworks, data-driven decisions, and defining success metrics.'
                                )
                            ),
                            h('div', { className: 'grid grid-cols-2 gap-4 mb-8' },
                                h('div', { className: 'text-center p-4 bg-gray-50 rounded-lg' },
                                    h(UsersIcon, { className: 'w-6 h-6 text-indigo-600 mx-auto mb-2' }),
                                    h('div', { className: 'text-sm text-gray-600' }, 'Questions'),
                                    h('div', { className: 'text-xl font-bold text-gray-900' }, simulation.questions.length)
                                ),
                                h('div', { className: 'text-center p-4 bg-gray-50 rounded-lg' },
                                    h(TrophyIcon, { className: 'w-6 h-6 text-indigo-600 mx-auto mb-2' }),
                                    h('div', { className: 'text-sm text-gray-600' }, 'One Attempt'),
                                    h('div', { className: 'text-xl font-bold text-gray-900' }, 'Only')
                                )
                            ),
                            h('form', { onSubmit: handleEmailSubmit, className: 'space-y-4' },
                                h('div', null,
                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Your Email (Required for Certificate & Results)'),
                                    h('div', { className: 'relative' },
                                        h(MailIcon, { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400' }),
                                        h('input', {
                                            type: 'email',
                                            value: email,
                                            onChange: (e) => setEmail(e.target.value),
                                            placeholder: 'your.email@company.com',
                                            required: true,
                                            className: 'w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent'
                                        })
                                    )
                                ),
                                h('button', {
                                    type: 'submit',
                                    className: 'w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 rounded-lg font-semibold hover:from-purple-500 hover:to-pink-500 transition-all shadow-lg hover:shadow-xl'
                                }, 'Start Simulation 1 →'),
                                h('p', { className: 'text-xs text-gray-500 text-center' }, "Your email is used only for results delivery and challenge notifications. No spam.")
                            )
                        )
                    )
                );
            }

            if (showResults) {
                const score = calculateScore();
                const narrative = getNarrative(score.percentage);

                return h('div', { className: 'min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6' },
                    h('div', { className: 'max-w-4xl mx-auto' },
                        h('div', { className: 'bg-white rounded-2xl shadow-xl overflow-hidden mb-6' },
                            h('div', { className: 'bg-gradient-to-r from-blue-600 to-blue-700 p-8 text-white text-center' },
                                h(TrophyIcon, { className: 'w-16 h-16 mx-auto mb-4' }),
                                h('div', { className: 'text-sm text-blue-100 mb-2' }, 'Simulation 1/20 Complete'),
                                h('h2', { className: 'text-3xl font-bold mb-2' }, narrative.tier),
                                h('div', { className: 'text-5xl font-bold mb-2' }, `${score.percentage}%`),
                                h('div', { className: 'text-blue-100' }, `Score: ${score.totalPoints} / ${score.maxPoints} points`)
                            ),
                            h('div', { className: 'p-8' },
                                h('h3', { className: 'text-xl font-bold text-gray-900 mb-3' }, narrative.title),
                                h('p', { className: 'text-gray-700 mb-6 leading-relaxed' }, narrative.text),
                                
                                h('div', { className: 'space-y-3' },
                                    h('button', {
                                        onClick: shareToLinkedIn,
                                        className: 'w-full bg-[#0A66C2] text-white py-4 rounded-lg font-semibold hover:bg-[#004182] transition-all flex items-center justify-center gap-2 shadow-lg'
                                    },
                                        h(Share2Icon),
                                        'Share Achievement on LinkedIn'
                                    ),
                                    h('button', {
                                        onClick: downloadBadge,
                                        className: 'w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-4 rounded-lg font-semibold hover:from-purple-500 hover:to-pink-500 transition-all flex items-center justify-center gap-2 shadow-lg'
                                    },
                                        h('svg', { className: 'w-5 h-5', fill: 'none', stroke: 'currentColor', viewBox: '0 0 24 24' },
                                            h('path', { strokeLinecap: 'round', strokeLinejoin: 'round', strokeWidth: 2, d: 'M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4' })
                                        ),
                                        'Download Achievement Badge Image'
                                    ),
                                    h('p', { className: 'text-center text-sm text-gray-500 mt-2' }, '💡 Pro tip: Download the badge image to add to your LinkedIn post for extra impact!')
                                )
                            )
                        ),
                        h('div', { className: 'bg-white rounded-2xl shadow-xl p-8' },
                            h('h3', { className: 'text-2xl font-bold text-gray-900 mb-6' }, 'Detailed Answer Analysis'),
                            simulation.questions.map((q, idx) => {
                                const userAnswer = answers[idx];
                                const correctAnswer = q.options.reduce((max, opt) => opt.points > max.points ? opt : max, q.options[0]);
                                const selectedOption = q.options.find(opt => opt.feedback === userAnswer.feedback);
                                const isCorrect = selectedOption.points === correctAnswer.points;
                                
                                return h('div', { key: q.id, className: 'mb-8 pb-8 border-b-2 border-gray-200 last:border-0' },
                                    // Question number and score
                                    h('div', { className: 'flex items-start justify-between mb-4' },
                                        h('div', { className: 'flex items-center gap-3' },
                                            h('div', { className: 'w-10 h-10 bg-blue-600 text-white rounded-lg flex items-center justify-center flex-shrink-0 font-bold text-lg' }, 
                                                idx + 1
                                            ),
                                            h('div', null,
                                                h('div', { className: 'text-sm text-gray-500' }, 'Question ' + (idx + 1) + ' of ' + simulation.questions.length),
                                                h('div', { className: 'flex items-center gap-2 mt-1' },
                                                    h('span', { className: 'text-lg font-bold text-gray-900' }, userAnswer.points + ' / ' + correctAnswer.points + ' points'),
                                                    isCorrect 
                                                        ? h('span', { className: 'text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-semibold' }, '✓ Optimal Choice')
                                                        : h('span', { className: 'text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded-full font-semibold' }, 'Room for Improvement')
                                                )
                                            )
                                        )
                                    ),
                                    
                                    // Scenario
                                    h('div', { className: 'analysis-scenario' },
                                        h('div', { className: 'text-xs font-semibold text-slate-600 uppercase tracking-wide mb-3' }, 'Scenario Context'),
                                        h('div', { className: 'scenario-content' }, formatText(q.scenario))
                                    ),
                                    
                                    // Question
                                    h('div', { className: 'mb-4' },
                                        h('p', { className: 'font-semibold text-gray-900 text-base mb-3' }, q.question)
                                    ),
                                    
                                    // Your Answer
                                    h('div', { className: isCorrect ? 'bg-green-50 border-2 border-green-200 rounded-lg p-4 mb-3' : 'bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-3' },
                                        h('div', { className: 'flex items-start gap-3' },
                                            h('div', { className: isCorrect ? 'text-2xl' : 'text-2xl' }, isCorrect ? '✓' : '✗'),
                                            h('div', { className: 'flex-1' },
                                                h('div', { className: isCorrect ? 'text-xs font-bold text-green-700 uppercase tracking-wide mb-2' : 'text-xs font-bold text-red-700 uppercase tracking-wide mb-2' }, 
                                                    'Your Answer'
                                                ),
                                                h('p', { className: 'text-sm text-gray-800 font-medium mb-2' }, selectedOption.text),
                                                h('p', { className: isCorrect ? 'text-xs text-green-700 font-medium' : 'text-xs text-red-700 font-medium' }, 
                                                    userAnswer.points + ' points earned'
                                                )
                                            )
                                        )
                                    ),
                                    
                                    // Correct Answer (only show if user didn't select it)
                                    !isCorrect && h('div', { className: 'bg-green-50 border-2 border-green-200 rounded-lg p-4 mb-4' },
                                        h('div', { className: 'flex items-start gap-3' },
                                            h('div', { className: 'text-2xl' }, '★'),
                                            h('div', { className: 'flex-1' },
                                                h('div', { className: 'text-xs font-bold text-green-700 uppercase tracking-wide mb-2' }, 
                                                    'Optimal Answer'
                                                ),
                                                h('p', { className: 'text-sm text-gray-800 font-medium mb-2' }, correctAnswer.text),
                                                h('p', { className: 'text-xs text-green-700 font-medium' }, 
                                                    correctAnswer.points + ' points (maximum)'
                                                )
                                            )
                                        )
                                    ),
                                    
                                    // Explanation and Learning
                                    h('div', { className: 'bg-blue-50 border-l-4 border-blue-600 p-4 rounded-r' },
                                        h('div', { className: 'text-xs font-bold text-blue-900 uppercase tracking-wide mb-2' }, 
                                            '💬 Mohan Simham\'s Comments'
                                        ),
                                        h('div', { className: 'feedback-content' }, formatText(userAnswer.feedback)),
                                        !isCorrect && h('div', { className: 'mt-3 pt-3 border-t border-blue-200' },
                                            h('p', { className: 'text-xs font-semibold text-blue-800 mb-2' }, 'Why the optimal answer is better:'),
                                            h('div', { className: 'feedback-content' }, formatText(correctAnswer.feedback))
                                        )
                                    )
                                );
                            })
                        ),
                        
                        // Disclaimer section
                        h('div', { className: 'bg-gray-50 rounded-2xl shadow-xl p-6 mb-6' },
                            h('h3', { className: 'text-lg font-bold text-gray-900 mb-4' }, 'Disclaimer'),
                            h('div', { className: 'text-sm text-gray-600 space-y-3' },
                                h('p', null,
                                    h('strong', null, 'Educational Use Only: '),
                                    'This simulation is an independent educational resource created for Product Manager skill development. It is not affiliated with, endorsed by, or sponsored by Airbnb, Inc.'
                                ),
                                h('p', null,
                                    h('strong', null, 'Scenario Basis: '),
                                    'The business scenarios presented are based on publicly available information about Airbnb\'s growth journey, combined with hypothetical elements for educational purposes. Specific details, dialogue, and decision frameworks have been constructed for learning objectives and may not reflect actual internal processes or decisions made by Airbnb.'
                                ),
                                h('p', null,
                                    h('strong', null, 'No Official Representation: '),
                                    'This content does not represent official Airbnb policies, strategies, or viewpoints. Any resemblance to actual internal decisions or processes is coincidental and used purely for educational illustration.'
                                ),
                                h('p', null,
                                    h('strong', null, 'Intellectual Property: '),
                                    'Airbnb and related trademarks are the property of Airbnb, Inc. This educational simulation operates under fair use provisions for non-commercial educational purposes.'
                                ),
                                h('p', null,
                                    h('strong', null, 'Independent Assessment: '),
                                    'All analysis, commentary, and educational frameworks are the independent work of the creator and do not reflect any official Airbnb training materials or assessments.'
                                )
                            )
                        ),
                        
                        h('div', { className: 'text-center mt-8' },
                            h('p', { className: 'text-gray-600 mb-2' }, 'Ready for Simulation 2/20? Continue the Product Manager challenge series to master product discovery & validation!'),
                            h('p', { className: 'text-sm text-gray-500 mb-1' }, '© 2025 Mohan Simham. All Rights Reserved.'),
                            h('p', { className: 'text-xs text-gray-400' }, 
                                'Connect with the creator: ',
                                h('a', { 
                                    href: 'https://linkedin.com/in/mohansimham', 
                                    target: '_blank',
                                    className: 'text-blue-400 hover:text-blue-500 underline'
                                }, 'LinkedIn: /mohansimham')
                            )
                        )
                    )
                );
            }

            const currentQ = simulation.questions[currentQuestion];

            return h('div', { className: 'min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6' },
                h('div', { className: 'max-w-3xl mx-auto' },
                    h('div', { className: 'mb-8' },
                        h('div', { className: 'flex justify-between text-sm text-gray-600 mb-2' },
                            h('span', null, `Question ${currentQuestion + 1} of ${simulation.questions.length}`),
                            h('span', null, `${Math.round(((currentQuestion) / simulation.questions.length) * 100)}% Complete`)
                        ),
                        h('div', { className: 'w-full bg-gray-200 rounded-full h-2' },
                            h('div', {
                                className: 'bg-gradient-to-r from-indigo-600 to-blue-600 h-2 rounded-full transition-all duration-500',
                                style: { width: `${((currentQuestion) / simulation.questions.length) * 100}%` }
                            })
                        )
                    ),
                    h('div', { className: 'bg-white rounded-2xl shadow-xl overflow-hidden' },
                        h('div', { className: 'bg-gradient-to-r from-gray-50 to-gray-100 p-6 border-b border-gray-200' },
                            h('div', { className: 'flex items-start gap-3' },
                                h('div', { className: 'w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0' },
                                    h('span', { className: 'text-white font-bold' }, currentQuestion + 1)
                                ),
                                h('div', null,
                                    h('div', { className: 'section-label' }, 'SCENARIO'),
                                    h('div', { className: 'scenario-content' }, formatText(currentQ.scenario))
                                )
                            )
                        ),
                        h('div', { className: 'p-6' },
                            h('div', { className: 'question-text mb-6' }, currentQ.question),
                            h('div', { className: 'space-y-3 mb-6' },
                                currentQ.options.map((option, idx) => {
                                    const isSelected = selectedAnswerIndex === idx;
                                    const buttonClass = isSelected 
                                        ? 'w-full text-left p-4 border-2 rounded-lg transition-all border-blue-600 bg-blue-50' 
                                        : 'w-full text-left p-4 border-2 rounded-lg transition-all border-gray-200 hover:border-blue-500 hover:bg-blue-50';
                                    
                                    const radioClass = isSelected
                                        ? 'w-6 h-6 border-2 rounded-full flex items-center justify-center flex-shrink-0 transition-all border-blue-600 bg-blue-600'
                                        : 'w-6 h-6 border-2 rounded-full flex items-center justify-center flex-shrink-0 transition-all border-gray-400 bg-white';
                                    
                                    const textClass = isSelected 
                                        ? 'option-text text-gray-900 font-medium' 
                                        : 'option-text text-gray-700';
                                    
                                    return h('button', {
                                        key: idx,
                                        onClick: () => handleAnswer(idx),
                                        className: buttonClass
                                    },
                                        h('div', { className: 'flex items-start gap-3' },
                                            h('div', { className: radioClass },
                                                isSelected ? h('div', { className: 'w-2.5 h-2.5 bg-white rounded-full' }) : null
                                            ),
                                            h('p', { className: textClass }, option.text)
                                        )
                                    );
                                })
                            ),
                            h('button', {
                                onClick: handleNextChallenge,
                                disabled: selectedAnswerIndex === null,
                                className: selectedAnswerIndex !== null
                                    ? 'w-full py-4 px-6 rounded-lg font-bold text-lg transition-all bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl cursor-pointer'
                                    : 'w-full py-4 px-6 rounded-lg font-bold text-lg transition-all bg-gray-200 text-gray-400 cursor-not-allowed'
                            }, currentQuestion === simulation.questions.length - 1 ? 'Complete Assessment →' : 'Next Challenge →')
                        )
                    ),
                    h('div', { className: 'text-center mt-6 text-sm text-gray-500' }, '💡 Choose carefully - you only get one attempt at this module')
                )
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(PMSimulation));

        // SNIPPET 5: Retry failed events on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                const failed = JSON.parse(localStorage.getItem('pmSimFailedEvents') || '[]');
                if (failed.length > 0) {
                    console.log('🔄 Found failed events, will retry...');
                }
            }, 2000);
        });
    </script>
</body>
</html>
